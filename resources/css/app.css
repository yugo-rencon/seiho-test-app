@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body {
    scroll-behavior: auto;
}

.secondary-title {
    @apply text-3xl font-bold;
}

.secondary-title::before {
    content: "";
    @apply block w-12 h-2 bg-theme rounded-full mb-1;
}

.secondary-paragraph {
    @apply text-secondary my-4 w-full max-w-3xl;
}

.badge {
    @apply px-4 py-2 text-sm bg-badge;
}

.secondary-head {
    @apply text-xl font-bold;
}

.button:hover {
    @apply text-purple-500;
}

/* 計算問題（QuestionTemp4）向け: 通常文は折り返し、式行だけ横スクロール可能にする */
.question-temp4-explanation {
    @apply whitespace-pre-wrap break-words;
}

.question-temp4-explanation .calc-line {
    @apply my-1 block overflow-x-auto whitespace-nowrap rounded bg-gray-50 px-2 py-1 font-mono text-[0.95em];
}

.question-temp4-explanation .calc-steps {
    @apply my-2 list-decimal space-y-1 pl-5;
}

.question-temp4-explanation .calc-result {
    @apply mt-2 font-semibold text-purple-700;
}

/* 計算問題（QuestionTemp4）向け: 構造化データ表示 */
.question-temp4-structured {
    @apply space-y-2.5;
}

.question-temp4-structured .calc-text {
    @apply break-words text-[0.95em] leading-relaxed text-gray-700;
}

.question-temp4-structured .calc-block-title {
    @apply inline-flex w-fit items-center rounded-md border border-purple-200 bg-purple-50 px-2.5 py-1 text-xs font-bold tracking-wide text-purple-700;
}

.question-temp4-structured .calc-line {
    @apply block overflow-x-auto whitespace-nowrap rounded bg-gray-50 px-2 py-1 font-mono text-[0.95em];
}

.question-temp4-structured .calc-formula-block {
    @apply relative overflow-x-auto rounded bg-gray-50 px-2 py-1 font-mono text-[0.95em];
    -webkit-overflow-scrolling: touch;
}

.question-temp4-structured .calc-formula-block-line + .calc-formula-block-line {
    @apply mt-1;
}

.question-temp4-structured .calc-formula-block-line {
    @apply whitespace-nowrap;
}

/* スマホでは右端に薄いフェードを常時表示して、横スクロール可能であることを示す */
@media (max-width: 640px) {
    .question-temp4-structured .calc-formula-block::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 20px;
        height: 100%;
        pointer-events: none;
        background: linear-gradient(to left, rgb(249 250 251 / 0.55) 35%, transparent);
    }
}

.question-temp4-structured .calc-kv {
    @apply grid grid-cols-[9em_1em_1fr] items-start gap-1 text-gray-800;
}

.question-temp4-structured .calc-kv-label {
    @apply text-gray-500;
}

.question-temp4-structured .calc-kv-sep {
    @apply text-gray-400;
}

.question-temp4-structured .calc-kv-value {
    @apply font-medium text-gray-900;
}

.question-temp4-structured .calc-result {
    @apply font-semibold text-purple-700;
}

.question-temp4-structured .calc-note {
    @apply text-xs text-gray-500;
}

.question-temp4-structured .calc-tex {
    @apply overflow-x-auto rounded bg-gray-50 px-2 py-2;
}

.question-temp4-structured .calc-tex .katex-display {
    margin: 0;
    text-align: left;
}

.question-temp4-structured .calc-tex .katex-display > .katex {
    text-align: left;
}

/* iOS/Safari の自動リンク化(メール/電話)による崩れを抑制 */
.no-data-detectors a[x-apple-data-detectors],
.no-data-detectors a[href^="mailto:"],
.no-data-detectors a[href^="tel:"] {
    color: inherit !important;
    text-decoration: none !important;
    font: inherit !important;
    pointer-events: none;
    cursor: default;
}
