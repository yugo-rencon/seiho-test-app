import{p as x,j as w,o as i,f as n,i as m,z as $,b as t,F as _,q as f,t as l,g as C,k,D as q,x as V,h as I,a as g,u as S,w as v,e as M,E as D,d as E,m as U}from"./app-c9c0d017.js";import{_ as N}from"./AuthenticatedLayout-a36ea1cc.js";import{Z as B}from"./index.esm-40253296.js";import{_ as T}from"./ValidationEroors-da0f992b.js";import{g as j}from"./common-1ae50ed3.js";import"./ApplicationLogo-565db0ca.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"modal",id:"modal-1","aria-hidden":"true"},L={class:"modal__overlay",tabindex:"-1","data-micromodal-close":""},P={class:"modal__container w-2/3",role:"dialog","aria-modal":"true","aria-labelledby":"modal-1-title"},z=t("h2",{class:"modal__title",id:"modal-1-title"}," 顧客検索 ",-1),A={class:"modal__content",id:"modal-1-content"},O={key:0,class:"lg:w-2/3 w-full mx-auto overflow-auto"},Z={class:"table-auto w-full text-left whitespace-no-wrap"},G=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100 rounded-tl rounded-bl"},"ID"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"氏名"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"カナ"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"電話番号")])],-1),H={class:"border-b-2 border-gray-200 px-4 py-3"},J=["onClick"],K={class:"border-b-2 border-gray-200 px-4 py-3"},Q={class:"border-b-2 border-gray-200 px-4 py-3"},R={class:"border-b-2 border-gray-200 px-4 py-3"},W={class:"flex"},X={__name:"MicroModal",emits:["update:customerId"],setup(p,{emit:y}){const d=x(""),r=w({}),u=x(!1),c=()=>{u.value=!u.value},b=async()=>{try{await q.get(`/api/searchCustomers/?search=${d.value}`).then(s=>{console.log(s.data),r.value=s.data}),c()}catch(s){console.log(s)}},h=y,e=s=>{d.value=s.kana,h("update:customerId",s.id),c()};return(s,a)=>(i(),n(_,null,[m(t("div",F,[t("div",L,[t("div",P,[t("header",{class:"modal__header"},[z,t("button",{onClick:c,type:"button",class:"modal__close","aria-label":"Close modal","data-micromodal-close":""})]),t("main",A,[r.value?(i(),n("div",O,[t("table",Z,[G,t("tbody",null,[(i(!0),n(_,null,f(r.value.data,o=>(i(),n("tr",{key:o.id},[t("td",H,[t("button",{onClick:Dt=>e({id:o.id,kana:o.kana}),type:"button",class:"text-blue-400"},l(o.id),9,J)]),t("td",K,l(o.name),1),t("td",Q,l(o.kana),1),t("td",R,l(o.tel),1)]))),128))])])])):C("",!0)]),t("footer",{class:"modal__footer"},[t("button",{onClick:c,type:"button",class:"modal__btn","data-micromodal-close":"","aria-label":"Close this dialog window"},"閉じる")])])])],512),[[$,u.value]]),t("div",W,[m(t("input",{name:"customer","onUpdate:modelValue":a[0]||(a[0]=o=>d.value=o),class:"w-3/4 bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 leading-8 transition-colors duration-200 ease-in-out"},null,512),[[k,d.value]]),t("button",{onClick:b,type:"button","data-micromodal-trigger":"modal-1",class:"mx-auto text-white bg-teal-500 border-0 py-2 px-4 focus:outline-none hover:bg-teal-600 rounded text-lg"},"検索する")])],64))}},Y=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," 購入画面 ",-1),tt={class:"py-12"},et={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ot={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},st={class:"p-6 text-gray-900"},at={class:"text-gray-600 body-font relative"},rt=["onSubmit"],lt={class:"container px-5 py-8 mx-auto"},dt={class:"lg:w-1/2 md:w-2/3 mx-auto"},it={class:"flex flex-wrap -m-2"},nt={class:"p-2 w-full"},ct={class:"relative"},ut=t("label",{for:"date",class:"leading-7 text-sm text-gray-600"},"日付",-1),_t={class:"p-2 w-full"},gt={class:"relative"},mt=t("label",{for:"",class:"leading-7 text-sm text-gray-600"},"会員名",-1),pt={class:"w-full mt-8 mx-auto overflow-auto"},yt={class:"table-auto w-full text-left whitespace-no-wrap"},bt=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100 rounded-tl rounded-bl"},"ID"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"商品名"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"金額"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"数量"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"小計")])],-1),ht={class:"border-b-2 border-gray-200 px-4 py-3"},xt={class:"border-b-2 border-gray-200 px-4 py-3"},ft={class:"border-b-2 border-gray-200 px-4 py-3"},vt={class:"border-b-2 border-gray-200 px-4 py-3"},wt=["onUpdate:modelValue"],kt=["value"],$t={class:"border-b-2 border-gray-200 px-4 py-3"},Ct={class:"p-2 w-full"},qt={class:""},Vt=t("label",{for:"price",class:"leading-7 text-sm text-gray-600"},"合計金額",-1),It=t("br",null,null,-1),St={class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},Mt=t("div",{class:"p-2 w-full"},[t("button",{class:"flex mx-auto text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"},"購入する")],-1),Lt={__name:"Create",props:{errors:Object,items:Array},setup(p){const y=p;V(()=>{r.date=j(),y.items.forEach(e=>{d.value.push({id:e.id,name:e.name,price:e.price,quantity:0})})});const d=x([]),r=w({date:null,customer_id:null,status:!0,items:[]}),u=I(()=>{let e=0;return d.value.forEach(s=>{e+=s.price*s.quantity}),e}),c=()=>{d.value.forEach(e=>{e.quantity>0&&r.items.push({id:e.id,quantity:e.quantity})}),U.Inertia.post(route("purchases.store"),r)},b=["0","1","2","3","4","5","6","7","8","9"],h=e=>{r.customer_id=e};return(e,s)=>(i(),n(_,null,[g(S(B),{title:"購入画面"}),g(N,null,{header:v(()=>[Y]),default:v(()=>[t("div",tt,[t("div",et,[t("div",ot,[t("div",st,[g(T,{errors:p.errors},null,8,["errors"]),t("section",at,[t("form",{onSubmit:M(c,["prevent"])},[t("div",lt,[t("div",dt,[t("div",it,[t("div",nt,[t("div",ct,[ut,m(t("input",{type:"date",id:"date",name:"date","onUpdate:modelValue":s[0]||(s[0]=a=>r.date=a),class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,512),[[k,r.date]])])]),t("div",_t,[t("div",gt,[mt,g(X,{"onUpdate:customerId":h})])]),t("div",pt,[t("table",yt,[bt,t("tbody",null,[(i(!0),n(_,null,f(d.value,a=>(i(),n("tr",{key:a.id},[t("td",ht,l(a.id),1),t("td",xt,l(a.name),1),t("td",ft,l(a.price),1),t("td",vt,[m(t("select",{name:"quantity","onUpdate:modelValue":o=>a.quantity=o},[E(" 1 "),(i(),n(_,null,f(b,o=>t("option",{value:o,key:o},l(o),9,kt)),64))],8,wt),[[D,a.quantity]])]),t("td",$t,l(a.price*a.quantity),1)]))),128))])])]),t("div",Ct,[t("div",qt,[Vt,It,t("div",St,l(u.value),1)])]),Mt])])])],40,rt)])])])])])]),_:1})],64))}};export{Lt as default};
