import{r as f,o as r,c as w,w as p,a as c,u,Z as k,b as t,n as i,d as o,t as s,e as n,F as x,f as g,g as y,i as h,h as q,j,v as C,O as D}from"./app-99a86592.js";import{_ as O}from"./SeihoTestLayout-4d9c2079.js";const S={class:"container mx-auto max-w-6xl px-5 py-8"},V=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"管理者画面"),t("p",{class:"mt-1 text-sm text-gray-500"}," ユーザーの情報を管理できます。 ")],-1),$={class:"mb-5 flex items-center gap-2"},B={key:0,class:"grid gap-3 sm:grid-cols-3 mb-6"},N={class:"rounded-xl border border-gray-100 bg-white p-4"},T=t("p",{class:"text-xs text-gray-500"},"総ユーザー数",-1),U={class:"mt-1 text-2xl font-bold text-gray-900"},I={class:"rounded-xl border border-gray-100 bg-white p-4"},M=t("p",{class:"text-xs text-gray-500"},"プレミアムユーザー数",-1),P={class:"mt-1 text-2xl font-bold text-purple-700"},A={class:"rounded-xl border border-gray-100 bg-white p-4"},F=t("p",{class:"text-xs text-gray-500"},"今月の新規登録数",-1),z={class:"mt-1 text-2xl font-bold text-gray-900"},E={key:1,class:"rounded-xl border border-gray-100 bg-white p-4"},L=t("h2",{class:"text-sm font-semibold text-gray-900"},"管理者ユーザー",-1),Z={key:0,class:"mt-3 space-y-2"},G={class:"min-w-0"},H={class:"truncate text-sm font-semibold text-gray-900"},J={class:"text-xs text-gray-500"},K={class:"flex items-center gap-2"},Q={key:1,class:"mt-2 text-sm text-gray-500"},R=["onSubmit"],W=t("button",{type:"submit",class:"whitespace-nowrap rounded-lg bg-purple-600 px-4 py-2 text-sm font-semibold text-white hover:bg-purple-500 sm:w-auto"}," 検索 ",-1),X={class:"overflow-x-auto rounded-xl border border-gray-100 bg-white hidden md:block"},Y={class:"min-w-full text-sm"},tt=t("thead",{class:"bg-gray-50 text-left text-gray-600"},[t("tr",null,[t("th",{class:"px-3 py-2"},"ID"),t("th",{class:"px-3 py-2"},"メール"),t("th",{class:"px-3 py-2"},"プレミアム"),t("th",{class:"px-3 py-2"},"最終購入日時"),t("th",{class:"px-3 py-2"},"操作")])],-1),et={class:"px-3 py-2 text-gray-700"},st={class:"px-3 py-2 text-gray-700"},rt={class:"px-3 py-2 text-gray-700"},ot={class:"px-3 py-2 text-gray-600"},at={class:"px-3 py-2"},dt={key:0},lt=t("td",{colspan:"5",class:"px-3 py-8 text-center text-sm text-gray-500"}," データがありません。 ",-1),it=[lt],nt={class:"space-y-3 md:hidden"},pt={class:"flex items-start justify-between gap-3"},ct={class:"text-xs text-gray-500"},ut={class:"mt-1 text-sm font-semibold text-gray-900 break-all"},xt={class:"mt-3 text-xs text-gray-600"},mt={class:"mt-3"},bt={key:0,class:"rounded-xl border border-gray-100 bg-white px-3 py-8 text-center text-sm text-gray-500"},_t={__name:"Admin",props:{users:{type:Object,required:!0},stats:{type:Object,required:!0},admins:{type:Array,required:!0},filters:{type:Object,required:!0}},setup(a){var _;const m=f(((_=a.filters)==null?void 0:_.q)??""),d=f("dashboard"),v=()=>{D.get(route("admin.index"),{q:m.value},{preserveState:!0,replace:!0})};return(b,l)=>(r(),w(O,{title:"管理画面"},{default:p(()=>[c(u(k),{title:"管理画面"}),t("div",S,[V,t("div",$,[t("button",{type:"button",class:i(["rounded-full px-4 py-1.5 text-sm font-semibold transition",d.value==="dashboard"?"bg-purple-600 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"]),onClick:l[0]||(l[0]=e=>d.value="dashboard")}," ダッシュボード ",2),t("button",{type:"button",class:i(["rounded-full px-4 py-1.5 text-sm font-semibold transition",d.value==="users"?"bg-purple-600 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"]),onClick:l[1]||(l[1]=e=>d.value="users")}," ユーザー管理 ",2)]),d.value==="dashboard"?(r(),o("div",B,[t("div",N,[T,t("p",U,s(a.stats.totalUsers),1)]),t("div",I,[M,t("p",P,s(a.stats.premiumUsers),1)]),t("div",A,[F,t("p",z,s(a.stats.newUsersThisMonth),1)])])):n("",!0),d.value==="dashboard"?(r(),o("div",E,[L,a.admins.length?(r(),o("div",Z,[(r(!0),o(x,null,g(a.admins,e=>(r(),o("div",{key:`admin-${e.id}`,class:"flex items-center justify-between rounded-lg border border-amber-100 bg-amber-50/40 px-3 py-2"},[t("div",G,[t("p",H,s(e.email),1),t("p",J,"ID: "+s(e.id),1)]),t("div",K,[t("span",{class:i(["rounded-full px-2 py-1 text-xs font-semibold",e.is_premium?"bg-emerald-50 text-emerald-700":"bg-gray-100 text-gray-600"])},s(e.is_premium?"プレミアム有効":"プレミアム無効"),3),c(u(h),{as:"button",method:"post",href:b.route("admin.users.togglePremium",{user:e.id}),class:"rounded-lg border border-purple-200 px-2 py-1 text-[11px] font-semibold text-purple-700 hover:bg-purple-50"},{default:p(()=>[y(s(e.is_premium?"未購入に戻す":"購入済みにする"),1)]),_:2},1032,["href"])])]))),128))])):(r(),o("p",Q," 管理者ユーザーは登録されていません。 "))])):n("",!0),d.value==="users"?(r(),o(x,{key:2},[t("form",{onSubmit:q(v,["prevent"]),class:"mb-4 flex flex-col gap-2 sm:flex-row"},[j(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>m.value=e),type:"text",placeholder:"メールアドレスで検索",class:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-purple-300 focus:outline-none"},null,512),[[C,m.value]]),W],40,R),t("div",X,[t("table",Y,[tt,t("tbody",null,[(r(!0),o(x,null,g(a.users.data,e=>(r(),o("tr",{key:e.id,class:"border-t border-gray-100"},[t("td",et,s(e.id),1),t("td",st,s(e.email),1),t("td",rt,[t("span",{class:i(["rounded-full px-2 py-1 text-xs font-semibold",e.is_premium?"bg-emerald-50 text-emerald-700":"bg-gray-100 text-gray-600"])},s(e.is_premium?"有効":"無効"),3)]),t("td",ot,s(e.last_paid_at||"-"),1),t("td",at,[c(u(h),{as:"button",method:"post",href:b.route("admin.users.togglePremium",{user:e.id}),class:"rounded-lg border border-purple-200 px-3 py-1.5 text-xs font-semibold text-purple-700 hover:bg-purple-50"},{default:p(()=>[y(s(e.is_premium?"未購入に戻す":"購入済みにする"),1)]),_:2},1032,["href"])])]))),128)),a.users.data.length===0?(r(),o("tr",dt,it)):n("",!0)])])]),t("div",nt,[(r(!0),o(x,null,g(a.users.data,e=>(r(),o("div",{key:`mobile-${e.id}`,class:"rounded-xl border border-gray-100 bg-white p-4"},[t("div",pt,[t("div",null,[t("p",ct,"ID: "+s(e.id),1),t("p",ut,s(e.email),1)]),t("span",{class:i(["rounded-full px-2 py-1 text-xs font-semibold",e.is_premium?"bg-emerald-50 text-emerald-700":"bg-gray-100 text-gray-600"])},s(e.is_premium?"有効":"無効"),3)]),t("div",xt," 最終購入日時: "+s(e.last_paid_at||"-"),1),t("div",mt,[c(u(h),{as:"button",method:"post",href:b.route("admin.users.togglePremium",{user:e.id}),class:"w-full rounded-lg border border-purple-200 px-3 py-2 text-xs font-semibold text-purple-700 hover:bg-purple-50"},{default:p(()=>[y(s(e.is_premium?"未購入に戻す":"購入済みにする"),1)]),_:2},1032,["href"])])]))),128)),a.users.data.length===0?(r(),o("div",bt," データがありません。 ")):n("",!0)])],64)):n("",!0)])]),_:1}))}};export{_t as default};
