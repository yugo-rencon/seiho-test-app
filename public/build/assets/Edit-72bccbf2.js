import{x as w,p as q,j as k,h as V,o as l,f as u,a as c,u as E,w as m,F as p,b as t,e as M,q as f,t as i,i as g,E as D,d as _,l as x,m as U}from"./app-5742dadd.js";import{_ as Y}from"./AuthenticatedLayout-8476cef2.js";import{Z as j}from"./index.esm-81acdf3b.js";import{_ as B}from"./ValidationEroors-dc5674b4.js";import{d as N}from"./dayjs.min-5360d500.js";import"./ApplicationLogo-f5b5c245.js";import"./_plugin-vue_export-helper-c27b6911.js";const S=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," 購入履歴 - 編集画面 ",-1),$={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},I={class:"p-6 text-gray-900"},L={class:"text-gray-600 body-font relative"},P={class:"container px-5 py-8 mx-auto"},C={class:"lg:w-1/2 md:w-2/3 mx-auto"},O={class:"flex flex-wrap -m-2"},R={class:"p-2 w-full"},T={class:"relative"},Z=t("label",{for:"date",class:"leading-7 text-sm text-gray-600"},"日付",-1),z=["value"],G={class:"p-2 w-full"},H={class:"relative"},J=t("label",{for:"customer",class:"leading-7 text-sm text-gray-600"},"会員名",-1),K=["value"],Q={class:"w-full mt-8 mx-auto overflow-auto"},W={class:"table-auto w-full text-left whitespace-no-wrap"},X=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100 rounded-tl rounded-bl"},"ID"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"商品名"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"金額"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"数量"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"小計")])],-1),tt={class:"border-b-2 border-gray-200 px-4 py-3"},et={class:"border-b-2 border-gray-200 px-4 py-3"},st={class:"border-b-2 border-gray-200 px-4 py-3"},ot={class:"border-b-2 border-gray-200 px-4 py-3"},at=["onUpdate:modelValue"],rt=["value"],it={class:"border-b-2 border-gray-200 px-4 py-3"},dt={class:"p-2 w-full"},nt={class:""},lt=t("label",{for:"price",class:"leading-7 text-sm text-gray-600"},"合計金額",-1),ut=t("br",null,null,-1),ct={class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},pt={class:"p-2 w-full"},gt={class:"relative"},_t=t("label",{for:"status",class:"leading-7 text-sm text-gray-600"},"ステータス",-1),yt=t("div",{class:"p-2 w-full"},[t("button",{class:"flex mx-auto text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"},"更新する")],-1),qt={__name:"Edit",props:{errors:Object,order:Array,items:Array},setup(y){const r=y;w(()=>{r.items.forEach(o=>{d.value.push({id:o.id,name:o.name,price:o.price,quantity:o.quantity})})});const d=q([]),a=k({id:r.order[0].id,date:N(r.order[0].created_at).format("YYYY-MM-DD"),customer_id:r.order[0].customer_id,status:r.order[0].status,items:[]}),b=V(()=>{let o=0;return d.value.forEach(e=>{o+=e.price*e.quantity}),o}),h=o=>{d.value.forEach(e=>{e.quantity>0&&a.items.push({id:e.id,quantity:e.quantity})}),U.Inertia.put(route("purchases.update",{purchase:o}),a)},v=["0","1","2","3","4","5","6","7","8","9"];return(o,e)=>(l(),u(p,null,[c(E(j),{title:"購入履歴 - 編集画面"}),c(Y,null,{header:m(()=>[S]),default:m(()=>[t("div",$,[t("div",A,[t("div",F,[t("div",I,[c(B,{errors:y.errors},null,8,["errors"]),t("section",L,[t("form",{onSubmit:e[2]||(e[2]=M(s=>h(a.id),["prevent"]))},[t("div",P,[t("div",C,[t("div",O,[t("div",R,[t("div",T,[Z,t("input",{disabled:"",type:"date",id:"date",value:a.date,name:"date",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,8,z)])]),t("div",G,[t("div",H,[J,t("input",{disabled:"",type:"text",id:"customer",value:r.order[0].customer_name,name:"customer",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,8,K)])]),t("div",Q,[t("table",W,[X,t("tbody",null,[(l(!0),u(p,null,f(d.value,s=>(l(),u("tr",{key:s.id},[t("td",tt,i(s.id),1),t("td",et,i(s.name),1),t("td",st,i(s.price),1),t("td",ot,[g(t("select",{name:"quantity","onUpdate:modelValue":n=>s.quantity=n},[_(" 1 "),(l(),u(p,null,f(v,n=>t("option",{value:n},i(n),9,rt)),64))],8,at),[[D,s.quantity]])]),t("td",it,i(s.price*s.quantity),1)]))),128))])])]),t("div",dt,[t("div",nt,[lt,ut,t("div",ct,i(b.value),1)])]),t("div",pt,[t("div",gt,[_t,g(t("input",{disabled:"",type:"radio",id:"status","onUpdate:modelValue":e[0]||(e[0]=s=>a.status=s),name:"customer",value:"1"},null,512),[[x,a.status]]),_("未キャンセル "),g(t("input",{disabled:"",type:"radio",id:"status","onUpdate:modelValue":e[1]||(e[1]=s=>a.status=s),name:"customer",value:"0"},null,512),[[x,a.status]]),_("キャンセルする ")])]),yt])])])],32)])])])])])]),_:1})],64))}};export{qt as default};
